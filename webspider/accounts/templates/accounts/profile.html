{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Settings</title>
    <link rel="stylesheet" href="{% static 'accounts/css/theme.css' %}">
    <link rel="stylesheet" href="{% static 'accounts/css/layout.css' %}">
    <link rel="stylesheet" href="{% static 'accounts/css/profile.css' %}">
</head>
<body class="theme-main">
    <header class="topbar">
        <div class="topbar-left">
            <div class="hamburger-menu" id="hamburger-menu">
                <button
                    type="button"
                    class="hamburger-toggle"
                    id="hamburger-toggle"
                    aria-label="Open menu"
                    aria-haspopup="true"
                    aria-expanded="false"
                >
                    &#9776;
                </button>
                <div class="hamburger-dropdown" id="hamburger-dropdown" role="menu" aria-label="Navigation menu">
                    <a href="{% url 'home' %}" class="hamburger-item" role="menuitem">Home</a>
                    <a href="{% url 'farmer_laws' %}" class="hamburger-item" role="menuitem">Farmers Laws</a>
                </div>
            </div>
            <a href="{% url 'home' %}" class="logo">
                <img src="{% static 'accounts/ml_brain.jpg' %}" alt="Logo">
                <span>WebMaster</span>
            </a>
        </div>
        <button type="button" id="theme-toggle" class="theme-btn" aria-label="Toggle theme">Theme: Light</button>
    </header>

    <main class="container page-container">
        <section class="card">
            <h1>Profile Settings</h1>

            {% if error %}
            <p class="message error">{{ error }}</p>
            {% endif %}
            {% if success %}
            <p class="message success">{{ success }}</p>
            {% endif %}

            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="profile-layout">
                    <aside class="profile-sidebar">
                        <div class="avatar-wrap">
                            <div class="avatar">
                                {% if request.user.profile_image %}
                                <img src="{{ request.user.profile_image.url }}" alt="Profile image">
                                {% else %}
                                {{ display_name|first }}
                                {% endif %}
                            </div>
                            <label for="profile_image" class="avatar-edit" title="Edit profile image">&#9998;</label>
                        </div>
                        <input id="profile_image" name="profile_image" type="file" accept="image/*" class="sr-only">

                        <div class="field">
                            <label for="full_name">Name</label>
                            <input id="full_name" name="full_name" type="text" value="{{ full_name }}">
                        </div>

                        <div class="readonly-field">
                            <span class="readonly-label">Gmail</span>
                            <div class="readonly-value">{{ request.user.email }}</div>
                        </div>

                        <div class="field">
                            <label for="farmer_type">Type of Farmer</label>
                            <input id="farmer_type" name="farmer_type" type="text" value="{{ farmer_type }}" placeholder="Example: Small Farmer">
                        </div>
                        <div class="field">
                            <label for="current_crop">Current Crop</label>
                            <input id="current_crop" name="current_crop" type="text" value="{{ current_crop }}" placeholder="Example: Paddy">
                        </div>
                        <div class="field">
                            <label for="plantation_date">Date of Plantation</label>
                            <input id="plantation_date" name="plantation_date" type="date" value="{{ plantation_date }}">
                        </div>
                        <div class="field">
                            <label for="crop_end_time">End Time</label>
                            <input id="crop_end_time" name="crop_end_time" type="time" value="{{ crop_end_time }}">
                        </div>
                    </aside>

                    <section class="profile-main">
                        <h2 class="section-title">Land and Location Details</h2>
                        <div class="grid-two">
                            <div class="field">
                                <label for="land_area_acres">Total Land (Acres)</label>
                                <input id="land_area_acres" name="land_area_acres" type="number" min="0" step="0.01" value="{{ land_area_acres }}" placeholder="Example: 0.25">
                                <p class="hint">Supports small holdings like 0.25 acre.</p>
                            </div>
                            <div class="field">
                                <label for="soil_type">Type of Soil</label>
                                <input id="soil_type" name="soil_type" type="text" value="{{ soil_type }}" placeholder="Example: Black cotton soil">
                            </div>
                        </div>
                        <div class="field">
                            <label for="passbook_image">Passbook Image</label>
                            <input id="passbook_image" name="passbook_image" type="file" accept="image/*">
                            <div class="passbook-preview">
                                {% if request.user.passbook_image %}
                                <img src="{{ request.user.passbook_image.url }}" alt="Passbook image">
                                {% else %}
                                <div class="passbook-dummy">Dummy passbook preview (upload image to replace)</div>
                                {% endif %}
                            </div>
                        </div>
                        <div class="grid-two">
                            <div class="field">
                                <label for="current_season">Current Season</label>
                                <select id="current_season" name="current_season">
                                    {% for season_value, season_label in season_options %}
                                    <option value="{{ season_value }}" {% if current_season == season_value %}selected{% endif %}>{{ season_label }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="field">
                                <label for="land_survey_numbers">Land Survey Number(s)</label>
                                <input id="land_survey_numbers" name="land_survey_numbers" type="text" value="{{ land_survey_numbers }}" placeholder="Example: 12/A, 14/B">
                            </div>
                        </div>
                        <div class="field">
                            <label for="address">Address</label>
                            <textarea id="address" name="address">{{ address }}</textarea>
                        </div>
                        <div class="save-row">
                            <button type="submit" class="save-btn">Save Changes</button>
                        </div>
                    </section>
                </div>
            </form>
        </section>
    </main>
    <div id="google_translate_element"></div>

        <script src="{% static 'accounts/js/profile.js' %}"></script>
    <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</body>
</html>

